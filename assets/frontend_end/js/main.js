jQuery(function($){"use strict";var SLZ=window.SLZ||{};SLZ.mainFunction=function(){var header_height=$('header').height();var tabBtn_height=$('.tab-search .nav-tabs .tab-btn-wrapper').height();$('.page-banner').css('top',header_height*(-1));$('.page-banner').css('margin-bottom',header_height*(-1)-tabBtn_height);$('.special-offer-list').slick({infinite:true,slidesToShow:4,slidesToScroll:4,speed:2000,dots:false,responsive:[{breakpoint:1025,settings:{slidesToShow:3,slidesToScroll:3,autoplay:true,autoplaySpeed:5000,dots:true,arrows:false}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2,autoplay:true,autoplaySpeed:5000,dots:true,arrows:false}},{breakpoint:481,settings:{slidesToShow:1,slidesToScroll:1,autoplay:true,autoplaySpeed:5000,dots:true,arrows:false}}]});new WOW().init();$(".selectbox").selectbox();$('.sbHolder').on('click',function(event){$('.input-daterange .tb-input, .date .tb-input').datepicker('hide');});$('body').on('click',function(event){if($('.sbHolder').has(event.target).length===0&&!$('.sbHolder').is(event.target)){$(".selectbox").selectbox('close');}});if($(".find-hotel-widget .tb-input").length){$('.input-daterange, .date .tb-input').datepicker({format:'mm/dd/yy',maxViewMode:0,autoclose:true});}};SLZ.header_footerFunction=function(){$('.dropdown-text').on('click',function(){if($(this).parent().find(".dropdown-topbar").hasClass('hide')===false){$(this).parent().find(".dropdown-topbar").addClass('hide');$('.dropdown-topbar').addClass('hide');}
else{$('.dropdown-topbar').addClass('hide');$(this).parent().find(".dropdown-topbar").removeClass('hide');}});$('body').on('click',function(event){if($('.dropdown-text').has(event.target).length===0&&!$('.dropdown-text').is(event.target)){$('.dropdown-topbar').addClass('hide');}});$('.slide-logo-wrapper').slick({infinite:true,slidesToShow:6,slidesToScroll:6,autoplay:true,autoplaySpeed:1,speed:8000,arrows:false,pauseOnHover:false,responsive:[{breakpoint:769,settings:{slidesToShow:4}},{breakpoint:481,settings:{slidesToShow:3,speed:5000}},{breakpoint:381,settings:{slidesToShow:2}}]});};$(document).ready(function(){SLZ.header_footerFunction();SLZ.mainFunction();});$(window).on('load',function(){if($(window).width()<768){setTimeout(function(){var header_height=$('header').height();var tabBtn_height=$('.tab-search .nav-tabs .tab-btn-wrapper').height();console.log(tabBtn_height);$('.page-banner').css('top',header_height*(-1));$('.page-banner').css('margin-bottom',header_height*(-1)-tabBtn_height);},100);};window.loading_screen=window.pleaseWait({logo:"assets/images/logo/logo-2.png",backgroundColor:'#fff',loadingHtml:"<div class='spinner sk-spinner-wave'><div class='rect1'></div><div class='rect2'></div><div class='rect3'></div><div class='rect4'></div><div class='rect5'></div></div>"});window.loading_screen.finish();if($(window).width()>=768&&$(window).width()<=1024){$(window).on('resize',function(){location.reload();});}});});$(".depAirlineSelect").on("change",function(){url=$(".detailedUrl").attr("href");url=url.slice(0,url.lastIndexOf('/'));url=url.slice(0,url.lastIndexOf('/'));URL=url.slice(0,url.lastIndexOf('/'));var selectDate=$(".selectedDate").text();var selectDate=selectDate.split('-');var selectDate=selectDate[2]+'-'+selectDate[1]+'-'+selectDate[0];var package=$("option:selected",this).data("package");var currentCity=$(".depCitySelect option:selected").val();var airlineId=$("option:selected",this).data("id");var getCities=$("option:selected",this).attr("class");var getCities=getCities.split('|');if(jQuery.inArray(currentCity,getCities)!==-1){cityIndex=jQuery.inArray(currentCity,getCities);$(".depCitySelect").val(currentCity);}else{$(".depCitySelect").val(getCities[0]);cityIndex="0";}
var priceTest=$("option:selected",this).data("price");if(priceTest.indexOf('|')>-1){var priceTest=priceTest.split('|');var price=priceTest[cityIndex];}else{var price=priceTest;}
$(".selectedDatePrice").html(price);var city_id=$(".depCitySelect option:selected").data("id");var newUrl=URL+'/'+selectDate+'/'+city_id+'/'+airlineId;$(".detailedUrl").attr("href",newUrl);});$(".depCitySelect").on("change",function(){var currentCity=$("option:selected",this).val();url=$(".detailedUrl").attr("href");url=url.slice(0,url.lastIndexOf('/'));url=url.slice(0,url.lastIndexOf('/'));URL=url.slice(0,url.lastIndexOf('/'));var getCities=$(".depAirlineSelect option:selected").attr("class");var getCities=getCities.split('|');if(jQuery.inArray(currentCity,getCities)!==-1){cityIndex=$.inArray(currentCity,getCities);}else{$(".depAirlineSelect > option").each(function(){var airCity=$(this).attr("class");var airCity=airCity.split('|');if(jQuery.inArray(currentCity,airCity)!==-1){$(".depAirlineSelect").val(this.text);cityIndex=$.inArray(currentCity,airCity);}});}
var priceTest=$(".depAirlineSelect option:selected").data("price");var priceTest=priceTest.split('|');var price=priceTest[cityIndex];$(".selectedDatePrice").html(price);var selectDate=$(".selectedDate").text();var selectDate=selectDate.split('-');var selectDate=selectDate[2]+'-'+selectDate[1]+'-'+selectDate[0];var city_id=$("option:selected",this).data("id");var package=$("option:selected",this).data("package");var airlineId=$(".depAirlineSelect option:selected").data("id");var newUrl=URL+'/'+selectDate+'/'+city_id+'/'+airlineId;$(".detailedUrl").attr("href",newUrl);});function getCityAirline(post_date,package){$(".request_loader").show();$(".request_loader i").after("<span>Please Wait...</span>");var dateAr=post_date.split('-');var newDate=dateAr[2]+'-'+dateAr[1]+'-'+dateAr[0];$(".selectedDate").text(newDate);$(".popupClick").html('<i class="fa fa-spinner fa-pulse fa-3x fa-fw margin-bottom"></i>').prop("disabled",true);$.ajax({url:baseURL+"assets/ajax/umrah/index.php",type:"POST",dataType:'json',success:function(response){$(".popupClick").html("Check Now").prop("disabled",false);$(".request_loader span").remove();$(".request_loader i").show();if(response.success==='yes'){$(".request_loader").hide();$(".depCitySelect").html(response.cities);$(".depAirlineSelect").html(response.airlines);var price=$(".depAirlineSelect option:selected").data("price");var price=price.split('|');$(".selectedDatePrice").html(price[0]);var city_id=$(".depCitySelect option:selected").data("id");var airline_id=$(".depAirlineSelect option:selected").data("id");updateURL=baseURL+'umrah/'+package+'/'+post_date+'/'+city_id+'/'+airline_id;$(".detailedUrl").attr("href",updateURL);}
if(response.success==='no'){$(".request_loader i").hide();$(".request_loader i").after("<span>No umrah package found for <strong>"+newDate+"</strong></span>");}},data:{d:post_date,p:package}});}
$(document).ready(function(){$('.date-input2').datepicker({dateFormat:'dd-mm-yy',autoclose:true});var today=new Date();var tomorrow=new Date(today.getTime()+24*60*60*1000);$('.date-input').datepicker({dateFormat:'yy-mm-dd',autoclose:true,minDate:tomorrow,onSelect:function(dateText,el){var newDate=dateText.split('-');var newDate=newDate[2]+'-'+newDate[1]+'-'+newDate[0];jQuery(".date-input").val(newDate);jQuery(".selectedDate").html(dateText);var day=el.selectedDay,mon=el.selectedMonth,year=el.selectedYear;var el=$(el.dpDiv).find('[data-year="'+year+'"][data-month="'+mon+'"]').filter(function(){return $(this).find('a').text().trim()==day;});if(el.attr('title')){}
var slug="NULL";if(homepage===false){if(el.data('package')){var slug=el.data('package').replace(/\s+/g,'-').toLowerCase();}}
jQuery(".eventDay.active_date").removeClass("active_date");el.addClass("active_date");getCityAirline(dateText,slug);},beforeShow:function(input,inst){startDates=[];startPrice=[];available=[];date_class=[];date_package=[];packageSlug="";selectdatesElem=$(input).siblings("select.startdates");$(input).siblings("select.startdates").find("option").each(function(){var startdateParts=$(this).val().split('-');startDates.push(startdateParts[0]+"-"+(parseInt(startdateParts[1],10)-1)+"-"+parseInt(startdateParts[2],10));});$(input).siblings("select.startPrice").find("option").each(function(){startPrice.push($(this).val());available.push($(this).data("available"));date_class.push($(this).data("class"));date_package.push($(this).data("package"));packageSlug=$(this).data("package");});setTimeout(function(){$(".ui-datepicker-calendar td").filter(function(){var date=$(this).text();return/\d/.test(date);}).attr('data-package',packageSlug);},0);$('#ui-datepicker-div').addClass(this.id);},beforeShowDay:function(date){$(".ui-datepicker-calendar td").filter(function(){var date=$(this).text();return/\d/.test(date);}).find("a").attr('data-custom',110);for(i=0;i<startDates.length;i++){if(date.getFullYear()+"-"+date.getMonth()+"-"+date.getDate()==startDates[i]){classP="";packageName="";packageName=date_package[i].replace(/\s+/g,'_').toLowerCase();if(date_class[i]==='activeAvailable'){classP="activeAvailable "+packageName;}
if(date_class[i]==='activeFilling'){classP="activeFilling "+packageName;}
if(date_class[i]==='activeSold'){classP="activeSold  ui-datepicker-unselectable ui-state-disabled "+packageName;}
return[true,'eventDay '+classP,startPrice[i]];}}
return[false,''];}});$('.date-input').datepicker().bind('click keyup',function(){if($('#ui-datepicker-div :last-child').is('table')){$('#ui-datepicker-div').append('<div class="classHolder"><ul><li class="red_sold">Sold Out</li><li class="green_available">Available</li><li class="yellow_ff">Filling Fast</li></ul></div>');}});$(document).on('click','.ui-datepicker-next, .ui-datepicker-prev',function(){if($('#ui-datepicker-div :last-child').is('table')){$('#ui-datepicker-div').append('<div class="classHolder"><ul><li class="red_sold">Sold Out</li><li class="green_available">Available</li><li class="yellow_ff">Filling Fast</li></ul></div>');}});});